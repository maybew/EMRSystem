package com.emrs.service;

import java.util.List;

import javax.servlet.http.HttpServletRequest;

import com.emrs.dao.PatientDAO;
import com.emrs.dao.PatientlistDAO;
import com.emrs.po.Patient;
import com.emrs.util.TimeFormatter;

public class PatientService {
	PatientDAO dao = PatientDAO.getPatientDAO();
	PatientlistDAO pldao = PatientlistDAO.getPatientlistDAO();
	
	public Patient getPatientById(String id) {
		if(id.equals("") || id == null) return null;
		return dao.find(id);
	}
	
	public List<Patient> searchPatientByName(String keyword) {
		if(keyword.equals("") || keyword == null) return dao.getAllPatient();
		return dao.searchPatientByName(keyword);
	}
	
	public void addPatientFromReq(HttpServletRequest req) {
		Patient patient = new Patient();
		
		patient.setPid(req.getParameter("pid"));
		patient.setPassword(req.getParameter("password"));
		patient.setFname(req.getParameter("fname"));
		patient.setLname(req.getParameter("lname"));
		patient.setBirthdate(TimeFormatter.getDate(req.getParameter("birthdate")));
		patient.setGender(Integer.valueOf(req.getParameter("gender")));
		patient.setAddress(req.getParameter("address"));
		patient.setEaddress(req.getParameter("eaddress"));
		patient.setEemail(req.getParameter("eemail"));
		patient.setEmail(req.getParameter("email"));
		patient.setEname(req.getParameter("ename"));
		patient.setEphone(req.getParameter("ephone"));
		patient.setIcaddress(req.getParameter("icaddress"));
		patient.setIcemail(req.getParameter("icemail"));
		patient.setIcexpiredate(req.getParameter("icexpiredate"));
		patient.setIcname(req.getParameter("icname"));
		patient.setIcphone(req.getParameter("icphone"));
		patient.setIcpolicynum(req.getParameter("icpolicynum"));
		patient.setIcpolicytype(req.getParameter("icpolicytype"));
		patient.setIctax(req.getParameter("ictax"));
		patient.setPhone(req.getParameter("phone"));
		
		dao.insert(patient);
	}

}
